

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Image &mdash; mpdaf.drs v1.0.1-dev documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mpdaf.drs v1.0.1-dev documentation" href="index.html" />
    <link rel="next" title="Cube" href="cube.html" />
    <link rel="prev" title="Spectrum" href="spectrum.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cube.html" title="Cube"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="spectrum.html" title="Spectrum"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">mpdaf.drs v1.0.1-dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="image">
<h1>Image<a class="headerlink" href="#image" title="Permalink to this headline">¶</a></h1>
<div class="section" id="image-class">
<h2>Image class<a class="headerlink" href="#image-class" title="Permalink to this headline">¶</a></h2>
<p>This class manages images, optionally including a variance and a bad pixel mask.</p>
<dl class="class">
<dt id="obj.Image">
<em class="property">class </em><tt class="descclassname">obj.</tt><tt class="descname">Image</tt><big>(</big><span class="optional">[</span><em>filename=None</em>, <em>ext = None</em>, <em>notnoise=False</em>, <em>shape=(101</em>, <em>101)</em>, <em>wcs = None</em>, <em>unit=None</em>, <em>data=None</em>, <em>var=None</em>, <em>fscale=1.0</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Possible FITS filename.</li>
<li><strong>ext</strong> (<em>integer or (integer,integer) or string or (string,string)</em>) &#8211; Number/name of the data extension or numbers/names of the data and variance extensions.</li>
<li><strong>notnoise</strong> (<em>boolean</em>) &#8211; <p>True if the noise Variance image is not read (if it exists).</p>
<p>Use notnoise=True to create image without variance extension.</p>
</li>
<li><strong>shape</strong> (<em>integer or (integer,integer)</em>) &#8211; Lengths of data in Y and X. Python notation is used: (ny,nx). (101,101) by default.</li>
<li><strong>wcs</strong> (<em>WCS</em>) &#8211; World coordinates.</li>
<li><strong>unit</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Possible data unit type. None by default.</li>
<li><strong>data</strong> (<em>float array</em>) &#8211; Array containing the pixel values of the image. None by default.</li>
<li><strong>var</strong> (<em>float array</em>) &#8211; Array containing the variance. None by default.</li>
<li><strong>fscale</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Flux scaling factor (1 by default).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">WCS</span>

<span class="n">wcs1</span> <span class="o">=</span> <span class="n">WCS</span><span class="p">(</span><span class="n">crval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cdelt</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">wcs2</span> <span class="o">=</span> <span class="n">WCS</span><span class="p">(</span><span class="n">crval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cdelt</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">shape</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">MyData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">))</span>

<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&quot;image.fits&quot;</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c"># image from file without variance (extension number is 1)</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&quot;image.fits&quot;</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="c"># image from file with variance (extension numbers are 1 and 2)</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">wcs</span><span class="o">=</span><span class="n">wcs1</span><span class="p">)</span> <span class="c"># image 300x300 filled with zeros</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">wcs</span><span class="o">=</span><span class="n">wcs1</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">MyData</span><span class="p">)</span> <span class="c"># image 300x300 filled with MyData</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">wcs</span><span class="o">=</span><span class="n">wcs2</span><span class="p">)</span> <span class="c"># warning: world coordinates and image have not the same dimensions</span>
                                 <span class="c"># ima.wcs = None</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">wcs</span><span class="o">=</span><span class="n">wcs2</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">MyData</span><span class="p">)</span> <span class="c"># warning: world coordinates and data have not the same dimensions</span>
                                     <span class="c"># ima.wcs = None</span>
</pre></div>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="26%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr><td>filename</td>
<td>string</td>
<td>Possible FITS filename.</td>
</tr>
<tr><td>unit</td>
<td>string</td>
<td>Possible data unit type.</td>
</tr>
<tr><td>cards</td>
<td>pyfits.CardList</td>
<td>Possible FITS header instance.</td>
</tr>
<tr><td>data</td>
<td>masked array</td>
<td>Pixel values and masked pixel of the image.</td>
</tr>
<tr><td>shape</td>
<td>array of 2 integers</td>
<td>Lengths of data in Y and X (python notation: (ny,nx))</td>
</tr>
<tr><td>var</td>
<td>array</td>
<td>Array containing the variance.</td>
</tr>
<tr><td>fscale</td>
<td>float</td>
<td>Flux scaling factor (1 by default).</td>
</tr>
<tr><td>wcs</td>
<td>WCS</td>
<td>World coordinates.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="indexing">
<h3>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Image[i,j]</span></tt> returns the corresponding value.</p>
<p><tt class="docutils literal"><span class="pre">Image[i1:i2,j1:j2]</span></tt> returns the sub-image.</p>
<p><tt class="docutils literal"><span class="pre">Image[i,j]</span> <span class="pre">=</span> <span class="pre">value</span></tt> sets value in Image.data[i,j]</p>
<p><tt class="docutils literal"><span class="pre">Image[i1:i2,j1:j2]</span> <span class="pre">=</span> <span class="pre">array</span></tt> sets the corresponding part of Image.data.</p>
</div>
<div class="section" id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="obj.Image.copy">
<tt class="descclassname">obj.Image.</tt><tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies Image object in a new one and returns it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.info">
<tt class="descclassname">obj.Image.</tt><tt class="descname">info</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints information</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.write">
<tt class="descclassname">obj.Image.</tt><tt class="descname">write</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#obj.Image.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the object in a FITS file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; the FITS filename</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__le__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__le__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__le__" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks data array where greater than a given value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; minimum value.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object containing a masked array.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__lt__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__lt__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__lt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks data array where greater or equal than a given value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; minimum value.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object containing a masked array.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__ge__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__ge__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__ge__" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks data array where less than a given value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; maximum value.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object containing a masked array.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__gt__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__gt__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__gt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks data array where less or equal than a given value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; maximum value.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object containing a masked array.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.resize">
<tt class="descclassname">obj.Image.</tt><tt class="descname">resize</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.resize" title="Permalink to this definition">¶</a></dt>
<dd><p>Resizes the image to have a minimum number of masked values.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__add__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__add__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator +.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>number or Image or Cube object.</em>) &#8211; <dl class="docutils">
<dt>x is Image :</dt>
<dd>Dimensions and world coordinates must be the same.</dd>
<dt>x is Cube :</dt>
<dd>The last two dimensions of the cube must be equal to the image dimensions.
World coordinates in spatial directions must be the same.</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image or Cube object.<p>image1 + number = image2 (image2[j,i] = image1[j,i] + number)</p>
<p>image1 + image2 = image3 (image3[j,i] = image1[j,i] + image2[j,i])</p>
<p>image + cube1 = cube2 (cube2[k,j,i] = cube1[k,j,i] + image[j,i])</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__sub__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__sub__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator -.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>number or Image or Cube object.</em>) &#8211; <dl class="docutils">
<dt>x is Image :</dt>
<dd>Dimensions and world coordinates must be the same.</dd>
<dt>x is Cube :</dt>
<dd>The last two dimensions of the cube must be equal to the image dimensions.
World coordinates in spatial directions must be the same.</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image or Cube object.<p>image1 - number = image2 (image2[j,i] = image1[j,i] - number)</p>
<p>image1 - image2 = image3 (image3[j,i] = image1[j,i] - image2[j,i])</p>
<p>image - cube1 = cube2 (cube2[k,j,i] = image[j,i] - cube1[k,j,i])</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__mul__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__mul__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator *.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>number or Spectrum or Image or Cube object.</em>) &#8211; <dl class="docutils">
<dt>x is Image :</dt>
<dd>Dimensions and world coordinates must be the same.</dd>
<dt>x is Cube :</dt>
<dd>The last two dimensions of the cube must be equal to the image dimensions.
World coordinates in spatial directions must be the same.</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Spectrum or Image or Cube object.<p>image1 * number = image2 (image2[j,i] = image1[j,i] * number)</p>
<p>image1 * image2 = image3 (image3[j,i] = image1[j,i] * image2[j,i])</p>
<p>image * cube1 = cube2 (cube2[k,j,i] = image[j,i] * cube1[k,j,i])</p>
<p>image * spectrum = cube (cube[k,j,i] = image[j,i] * spectrum[k]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__div__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__div__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__div__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator /.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>number or Image or Cube object.</em>) &#8211; <dl class="docutils">
<dt>x is Image :</dt>
<dd>Dimensions and world coordinates must be the same.</dd>
<dt>x is Cube :</dt>
<dd>The last two dimensions of the cube must be equal to the image dimensions.
World coordinates in spatial directions must be the same.</dd>
</dl>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image or Cube object.<p>image1 / number = image2 (image2[j,i] = image1[j,i] / number)</p>
<p>image1 / image2 = image3 (image3[j,i] = image1[j,i] / image2[j,i])</p>
<p>image / cube1 = cube2 (cube2[k,j,i] = image[j,i] / cube1[k,j,i])</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.__pow__">
<tt class="descclassname">obj.Image.</tt><tt class="descname">__pow__</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#obj.Image.__pow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the power exponent of data extensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<em>number</em>) &#8211; </td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.sqrt">
<tt class="descclassname">obj.Image.</tt><tt class="descname">sqrt</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.sqrt" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the positive square-root of data extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.abs">
<tt class="descclassname">obj.Image.</tt><tt class="descname">abs</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.abs" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the absolute value of data extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.set_wcs">
<tt class="descclassname">obj.Image.</tt><tt class="descname">set_wcs</tt><big>(</big><em>wcs</em><big>)</big><a class="headerlink" href="#obj.Image.set_wcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the world coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>wcs</strong> (<em>WCS</em>) &#8211; World coordinates.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.set_var">
<tt class="descclassname">obj.Image.</tt><tt class="descname">set_var</tt><big>(</big><span class="optional">[</span><em>var=None</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.set_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the variance array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>var</strong> (<em>float array</em>) &#8211; Input variance array. If None, variance is set with zeros.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.mask">
<tt class="descclassname">obj.Image.</tt><tt class="descname">mask</tt><big>(</big><em>center</em>, <em>radius</em><span class="optional">[</span>, <em>pix=False</em>, <em>inside=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks values inside/outside the described region.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
</li>
<li><strong>radius</strong> (<em>float or (float,float)</em>) &#8211; <p>Radius defined the explored region.</p>
<p>If radius is float, it defined a circular region.</p>
<p>If radius is (float,float), it defined a rectangular region.</p>
<p>If pix is False, radius = (ddec/2, dra/2) is in arcsecs.</p>
<p>If pix is True, radius = (di,dj) is in pixels.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center and radius are in degrees and arcsecs.</p>
<p>If pix is True, center and radius are in pixels.</p>
</li>
<li><strong>inside</strong> (<em>boolean</em>) &#8211; <p>If inside is True, pixels inside the described region are masked.</p>
<p>If inside is False, pixels outside the described region are masked.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.get_step">
<tt class="descclassname">obj.Image.</tt><tt class="descname">get_step</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.get_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the image steps [dDec, dRa].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.get_range">
<tt class="descclassname">obj.Image.</tt><tt class="descname">get_range</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.get_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns [ [dec_min,ra_min], [dec_max,ra_max] ]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.get_start">
<tt class="descclassname">obj.Image.</tt><tt class="descname">get_start</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.get_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns [dec,ra] corresponding to pixel (0,0).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.get_end">
<tt class="descclassname">obj.Image.</tt><tt class="descname">get_end</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.get_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns [dec,ra] corresponding to pixel (-1,-1).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.get_rot">
<tt class="descclassname">obj.Image.</tt><tt class="descname">get_rot</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.get_rot" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angle of rotation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.sum">
<tt class="descclassname">obj.Image.</tt><tt class="descname">sum</tt><big>(</big><span class="optional">[</span><em>axis=None</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sum over the given axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<em>None, 0 or 1</em>) &#8211; axis = None returns a float, axis=0 or 1 returns a line or a column, other cases return None.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float or Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.norm">
<tt class="descclassname">obj.Image.</tt><tt class="descname">norm</tt><big>(</big><span class="optional">[</span><em>type='flux'</em>, <em>value=1.0</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes total flux to value (default 1).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>type</strong> (<em>&#8216;flux&#8217; | &#8216;sum&#8217; | &#8216;max&#8217;</em>) &#8211; <p>If &#8216;flux&#8217;,the flux is normalized and the pixel area is taken into account.</p>
<p>If &#8216;sum&#8217;, the flux is normalized to the sum of flux independantly of pixel size.</p>
<p>If &#8216;max&#8217;, the flux is normalized so that the maximum of intensity will be &#8216;value&#8217;.</p>
</li>
<li><strong>value</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Normalized value (default 1).</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.peak">
<tt class="descclassname">obj.Image.</tt><tt class="descname">peak</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>radius=0</em>, <em>pix = False</em>, <em>dpix=2</em>, <em>plot=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.peak" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds image peak location.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
<p>If center is None, the full image is explored.</p>
</li>
<li><strong>radius</strong> (<em>float or (float,float)</em>) &#8211; <p>Radius defined the explored region.</p>
<p>If pix is False, radius = (ddec/2, dra/2) is in arcsecs.</p>
<p>If pix is True, radius = (di,dj) is in pixels.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center and radius are in degrees and arcsecs.</p>
<p>If pix is True, center and radius are in pixels.</p>
</li>
<li><strong>dpix</strong> (<em>integer</em>) &#8211; Half size of the window to compute the center of gravity.</li>
<li><strong>plot</strong> (<em>boolean</em>) &#8211; If True, the peak center is overplotted on the image.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Returns a dictionary {&#8216;dec&#8217;, &#8216;ra&#8217;, &#8216;i&#8217;, &#8216;j&#8217;, &#8216;data&#8217;} containing the peak position and the peak intensity.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.fwhm">
<tt class="descclassname">obj.Image.</tt><tt class="descname">fwhm</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>radius=0</em>, <em>pix = False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.fwhm" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the fwhm center.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
<p>If center is None, the full image is explored.</p>
</li>
<li><strong>radius</strong> (<em>float or (float,float)</em>) &#8211; <p>Radius defined the explored region.</p>
<p>If pix is False, radius = (ddec/2, dra/2) is in arcsecs.</p>
<p>If pix is True, radius = (di,dj) is in pixels.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center and radius are in degrees and arcsecs.</p>
<p>If pix is True, center and radius are in pixels.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Returns [fwhm_dec,fwhm_ra].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ee">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ee</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>radius=0</em>, <em>pix = False</em>, <em>frac = False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.ee" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes ensquared energy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
<p>If center is None, the full image is explored.</p>
</li>
<li><strong>radius</strong> (<em>float or (float,float)</em>) &#8211; <p>Radius defined the explored region.</p>
<p>If radius is float, it defined a circular region.</p>
<p>If radius is (float,float), it defined a rectangular region.</p>
<p>If pix is False, radius = (ddec/2, dra/2) is in arcsecs.</p>
<p>If pix is True, radius = (di,dj) is in pixels.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center and radius are in degrees and arcsecs.</p>
<p>If pix is True, center and radius are in pixels.</p>
</li>
<li><strong>frac</strong> (<em>boolean</em>) &#8211; If frac is True, result is given relative to the total energy.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ee_curve">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ee_curve</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>pix = False</em>, <em>etot = None</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.ee_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Spectrum object containing enclosed energy as function of radius.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
<p>If center is None, center of the image is used.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center is in degrees.</p>
<p>If pix is True, center is in pixels.</p>
</li>
<li><strong>etot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Total energy. If etot is not set it is computed from the full image.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Spectrum</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ee_size">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ee_size</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>pix = False</em>, <em>ee = None</em>, <em>frac = 0.90</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.ee_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the size of the square center on (dec,ra) containing the fraction of the energy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; <p>Center of the explored region.</p>
<p>If pix is False, center = (dec, ra) is in degrees.</p>
<p>If pix is True, center = (i,j) is in pixels.</p>
<p>If center is None, center of the image is used.</p>
</li>
<li><strong>pix</strong> (<em>boolean</em>) &#8211; <p>If pix is False, center is in degrees.</p>
<p>If pix is True, center is in pixels.</p>
</li>
<li><strong>ee</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Enclosed energy. If ee is not set it is computed from the full image that contain the fraction (frac) of the total energy.</li>
<li><strong>frac</strong> (<em>float in ]0,1]</em>) &#8211; Fraction of energy.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(float,float)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.add">
<tt class="descclassname">obj.Image.</tt><tt class="descname">add</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#obj.Image.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the image other to the current image. The coordinate are taken into account.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> (<em>Image</em>) &#8211; Second image to add.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.segment">
<tt class="descclassname">obj.Image.</tt><tt class="descname">segment</tt><big>(</big><span class="optional">[</span><em>shape=(2</em>, <em>2)</em>, <em>minsize=20</em>, <em>background = 20</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Segments the image in a number of smaller images. Returns a list of images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>(integer,integer)</em>) &#8211; Shape used for connectivity.</li>
<li><strong>minsize</strong> (<em>integer</em>) &#8211; Minimmum size of the images.</li>
<li><strong>background</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Under this value, flux is considered as background.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List of Image objects.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.moments">
<tt class="descclassname">obj.Image.</tt><tt class="descname">moments</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.moments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns [width_dec, width_ra] first moments of the 2D gaussian.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">float array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.gauss_fit">
<tt class="descclassname">obj.Image.</tt><tt class="descname">gauss_fit</tt><big>(</big><em>pos_min</em>, <em>pos_max</em><span class="optional">[</span>, <em>center=None</em>, <em>flux=None</em>, <em>width=None</em>, <em>cont=None</em>, <em>rot = 0</em>, <em>peak=False</em>, <em>factor = 1</em>, <em>plot=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.gauss_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs polynomial fit on image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pos_min</strong> (<em>(float,float)</em>) &#8211; Minimum declination and right ascension in degrees (dec_min, ra_min).</li>
<li><strong>pos_max</strong> (<em>(float,float)</em>) &#8211; Maximum declination and right ascension in degrees (dec_max, ra_max)</li>
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; Initial gaussian center (dec_peak, ra_peak). If None it is estimated.</li>
<li><strong>flux</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Initial integrated gaussian flux or gaussian peak value if peak is True. If None, peak value is estimated.</li>
<li><strong>width</strong> (<em>(float,float)</em>) &#8211; Initial spreads of the Gaussian blob (dec_width, ra_width). If None, they are estimated.</li>
<li><strong>cont</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Initial continuum value, if None it is estimated.</li>
<li><strong>rot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Initial rotation in degree.</li>
<li><strong>peak</strong> (<em>boolean</em>) &#8211; If true, flux contains a gaussian peak value.</li>
<li><strong>factor</strong> (<em>integer</em>) &#8211; <p>If factor&lt;=1, gaussian value is computed in the center of each pixel.</p>
<p>If factor&gt;1, for each pixel, gaussian value is the sum of the gaussian values on the factor*factor pixels divided by the pixel area.</p>
</li>
<li><strong>plot</strong> (<em>boolean</em>) &#8211; If True, the gaussian is plotted.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">objs.Gauss2D object (<a class="reference internal" href="#gauss2d-class">Gauss2D class</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.add_gaussian_noise">
<tt class="descclassname">obj.Image.</tt><tt class="descname">add_gaussian_noise</tt><big>(</big><em>sigma</em><big>)</big><a class="headerlink" href="#obj.Image.add_gaussian_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds Gaussian noise to image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sigma</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Standard deviation.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">obj.Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.add_poisson_noise">
<tt class="descclassname">obj.Image.</tt><tt class="descname">add_poisson_noise</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.add_poisson_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds Poisson noise to image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">obj.Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.inside">
<tt class="descclassname">obj.Image.</tt><tt class="descname">inside</tt><big>(</big><em>coord</em><big>)</big><a class="headerlink" href="#obj.Image.inside" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if coord is inside image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>coord</strong> (<em>(float,float)</em>) &#8211; declination and right ascension in degrees (dec, ra).</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.fftconvolve">
<tt class="descclassname">obj.Image.</tt><tt class="descname">fftconvolve</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#obj.Image.fftconvolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolves image with other using fft.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> (<em>2d-array or Image</em>) &#8211; Second Image or 2d-array.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">obj.Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.fftconvolve_gauss">
<tt class="descclassname">obj.Image.</tt><tt class="descname">fftconvolve_gauss</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>flux=1.</em>, <em>width=(1.</em>, <em>1.)</em>, <em>peak=False</em>, <em>rot = 0.</em>, <em>factor=1</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.fftconvolve_gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolves image with a 2D gaussian.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; Gaussian center (dec_peak, ra_peak). If None the center of the image is used.</li>
<li><strong>flux</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Integrated gaussian flux or gaussian peak value if peak is True.</li>
<li><strong>width</strong> (<em>(float,float)</em>) &#8211; Spreads of the Gaussian blob (dec_width,ra_width).</li>
<li><strong>peak</strong> (<em>boolean</em>) &#8211; If true, flux contains a gaussian peak value.</li>
<li><strong>rot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Angle position in degree.</li>
<li><strong>factor</strong> (<em>integer</em>) &#8211; <p>If factor&lt;=1, gaussian value is computed in the center of each pixel.</p>
<p>If factor&gt;1, for each pixel, gaussian value is the sum of the gaussian values on the factor*factor pixels divided by the pixel area.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.fftconvolve_moffat">
<tt class="descclassname">obj.Image.</tt><tt class="descname">fftconvolve_moffat</tt><big>(</big><span class="optional">[</span><em>center=None</em>, <em>I=1.</em>, <em>a=1.0</em>, <em>q=1.0</em>, <em>n=2</em>, <em>rot = 0.</em>, <em>factor=1</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.fftconvolve_moffat" title="Permalink to this definition">¶</a></dt>
<dd><p>Convolves image with a 2D moffat.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; Gaussian center (dec_peak, ra_peak). If None the center of the image is used.</li>
<li><strong>I</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Intensity at image center. 1 by default.</li>
<li><strong>a</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Half width at half maximum of the image in the absence of atmospheric scattering. 1 by default.</li>
<li><strong>q</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Axis ratio, 1 by default.</li>
<li><strong>n</strong> (<em>integer</em>) &#8211; Atmospheric scattering coefficient. 2 by default.</li>
<li><strong>rot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Angle position in degree.</li>
<li><strong>factor</strong> (<em>integer</em>) &#8211; <p>If factor&lt;=1, moffat value is computed in the center of each pixel.</p>
<p>If factor&gt;1, for each pixel, moffat value is the sum of the moffat values on the factor*factor pixels divided by the pixel area.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="transformation">
<h3>Transformation<a class="headerlink" href="#transformation" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="obj.Image.truncate">
<tt class="descclassname">obj.Image.</tt><tt class="descname">truncate</tt><big>(</big><em>dec_min</em>, <em>dec_max</em>, <em>ra_min</em>, <em>ra_max</em><span class="optional">[</span>, <em>mask=True</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the corresponding sub-image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dec_min</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Minimum declination in degrees.</li>
<li><strong>dec_max</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Maximum declination in degrees.</li>
<li><strong>ra_min</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Minimum right ascension in degrees.</li>
<li><strong>ra_max</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Maximum right ascension in degrees.</li>
<li><strong>mask</strong> (<em>boolean</em>) &#8211; if True, pixels outside [dec_min,dec_max] and [ra_min,ra_max] are masked.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.rotate_wcs">
<tt class="descclassname">obj.Image.</tt><tt class="descname">rotate_wcs</tt><big>(</big><em>theta</em><big>)</big><a class="headerlink" href="#obj.Image.rotate_wcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates WCS coordinates to new orientation given by theta.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>theta</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Rotation in degree.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.rotate">
<tt class="descclassname">obj.Image.</tt><tt class="descname">rotate</tt><big>(</big><em>theta</em><big>)</big><a class="headerlink" href="#obj.Image.rotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates the image using spline interpolation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>theta</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Rotation in degree.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.rebin_factor">
<tt class="descclassname">obj.Image.</tt><tt class="descname">rebin_factor</tt><big>(</big><em>factor</em><span class="optional">[</span>, <em>margin='center'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.rebin_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Shrinks the size of the image by factor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>factor</strong> (<em>integer or (integer,integer)</em>) &#8211; Factor in X and Y. Python notation: (ny,nx).</li>
<li><strong>margin</strong> (<em>&#8216;center&#8217; or &#8216;origin&#8217;</em>) &#8211; <p>This parameters is used if new size is not an integer multiple of the original size.</p>
<p>In &#8216;center&#8217; case, pixels will be added on the left and on the right, on the bottom and of the top of the image.</p>
<p>In &#8216;origin&#8217;case, pixels will be added on (n+1) line/column.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.rebin">
<tt class="descclassname">obj.Image.</tt><tt class="descname">rebin</tt><big>(</big><em>newdim</em>, <em>newstart</em>, <em>newstep</em><span class="optional">[</span>, <em>flux=False</em>, <em>order=3</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.rebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins the image to a new coordinate system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>newdim</strong> (<em>integer or (integer,integer)</em>) &#8211; New dimensions. Python notation: (ny,nx)</li>
<li><strong>newstart</strong> (<em>float or (float, float)</em>) &#8211; New positions (dec,ra) for the pixel (0,0). If None, old position is used.</li>
<li><strong>newstep</strong> (<em>float or (float, float)</em>) &#8211; New step (ddec,dra).</li>
<li><strong>flux</strong> (<em>boolean</em>) &#8211; if flux is True, the flux is conserved.</li>
<li><strong>order</strong> (<em>integer</em>) &#8211; The order of the spline interpolation, default is 3. The order has to be in the range 0-5.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="filter">
<h3>Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="obj.Image.gaussian_filter">
<tt class="descclassname">obj.Image.</tt><tt class="descname">gaussian_filter</tt><big>(</big><span class="optional">[</span><em>sigma=3</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.gaussian_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies gaussian filter to the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sigma</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Standard deviation for Gaussian kernel</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.median_filter">
<tt class="descclassname">obj.Image.</tt><tt class="descname">median_filter</tt><big>(</big><span class="optional">[</span><em>size=3</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.median_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies median filter to the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Shape that is taken from the input array, at every element position, to define the input to the filter function. Default is 3.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.maximum_filter">
<tt class="descclassname">obj.Image.</tt><tt class="descname">maximum_filter</tt><big>(</big><span class="optional">[</span><em>size=3</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.maximum_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies maximum filter to the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Shape that is taken from the input array, at every element position, to define the input to the filter function. Default is 3.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.minimum_filter">
<tt class="descclassname">obj.Image.</tt><tt class="descname">minimum_filter</tt><big>(</big><span class="optional">[</span><em>size=3</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.minimum_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies minimum filter to the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>size</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Shape that is taken from the input array, at every element position, to define the input to the filter function. Default is 3.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Image</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="plotting">
<h3>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="obj.Image.plot">
<tt class="descclassname">obj.Image.</tt><tt class="descname">plot</tt><big>(</big><span class="optional">[</span><em>title=None</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>title</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Figure title (None by default).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ipos">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ipos</tt><big>(</big><span class="optional">[</span><em>filename='None'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.Image.ipos" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints cursor position in interactive mode (i and j define the nearest pixel, ra and dec are the position, data contains the image data value (data[i,j]) ).</p>
<p>To read cursor position, click on the left mouse button.</p>
<p>To remove a cursor position, click on the left mouse button + &lt;d&gt;</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
<p>At the end, clicks are saved in self.clicks as dictionary {&#8216;dec&#8217;,&#8217;ra&#8217;,&#8217;i&#8217;,&#8217;j&#8217;,&#8217;data&#8217;}.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#string" title="(in Python v2.7)"><em>string</em></a>) &#8211; If filename is not None, the cursor values are saved as a fits table with columns labeled &#8216;I&#8217;|&#8217;J&#8217;|&#8217;RA&#8217;|&#8217;DEC&#8217;|&#8217;DATA&#8217;.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Image.idist">
<tt class="descclassname">obj.Image.</tt><tt class="descname">idist</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.idist" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets distance and center from 2 cursor positions (interactive mode).</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.istat">
<tt class="descclassname">obj.Image.</tt><tt class="descname">istat</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.istat" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes image statistics from windows defined with left mouse button (mean is the mean value, median the median value, std is the rms standard deviation, sum the sum, peak the peak value, npts is the total number of points).</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ipeak">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ipeak</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.ipeak" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds peak location in windows defined with left mouse button.</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.ifwhm">
<tt class="descclassname">obj.Image.</tt><tt class="descname">ifwhm</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.ifwhm" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes fwhm in windows defined with left mouse button.</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.iee">
<tt class="descclassname">obj.Image.</tt><tt class="descname">iee</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.iee" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes enclosed energy in windows defined with left mouse button.</p>
<p>To quit the interactive mode, click on the right mouse button.</p>
</dd></dl>

<dl class="function">
<dt id="obj.Image.imask">
<tt class="descclassname">obj.Image.</tt><tt class="descname">imask</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Image.imask" title="Permalink to this definition">¶</a></dt>
<dd><p>Over-plots masked values (interactive mode).</p>
</dd></dl>

</div>
</div>
<div class="section" id="functions-to-create-a-new-image">
<h2>Functions to create a new image<a class="headerlink" href="#functions-to-create-a-new-image" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="obj.gauss_image">
<tt class="descclassname">obj.</tt><tt class="descname">gauss_image</tt><big>(</big><span class="optional">[</span><em>shape=(101</em>, <em>101)</em>, <em>wcs=WCS()</em>, <em>center=None</em>, <em>flux=1.</em>, <em>width=(1.</em>, <em>1.)</em>, <em>peak=False</em>, <em>rot = 0.</em>, <em>factor=1</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.gauss_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new image from a 2D gaussian.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>integer or (integer,integer)</em>) &#8211; <p>Lengths of the image in Y and X with python notation: (ny,nx). (101,101) by default.</p>
<p>If wcs object contains dimensions, shape is ignored and wcs dimensions are used.</p>
</li>
<li><strong>wcs</strong> (<em>WCS</em>) &#8211; World coordinates.</li>
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; Gaussian center (dec_peak, ra_peak). If None the center of the image is used.</li>
<li><strong>flux</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Integrated gaussian flux or gaussian peak value if peak is True.</li>
<li><strong>width</strong> (<em>(float,float)</em>) &#8211; Spreads of the Gaussian blob (dec_width,ra_width).</li>
<li><strong>peak</strong> (<em>boolean</em>) &#8211; If true, flux contains a gaussian peak value.</li>
<li><strong>rot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Angle position in degree.</li>
<li><strong>factor</strong> (<em>integer</em>) &#8211; <p>If factor&lt;=1, gaussian value is computed in the center of each pixel.</p>
<p>If factor&gt;1, for each pixel, gaussian value is the sum of the gaussian values on the factor*factor pixels divided by the pixel area.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Image object (<a class="reference internal" href="#image-class">Image class</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">gauss_image</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">WCS</span>
<span class="n">wcs</span> <span class="o">=</span> <span class="n">WCS</span> <span class="p">(</span><span class="n">cdelt</span><span class="o">=</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">crval</span><span class="o">=</span><span class="p">(</span><span class="mf">8.5</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
<span class="n">ima</span> <span class="o">=</span> <span class="n">gauss_image</span><span class="p">(</span><span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">rot</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">ima</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">gauss</span> <span class="o">=</span> <span class="n">ima</span><span class="o">.</span><span class="n">gauss_fit</span><span class="p">(</span><span class="n">pos_min</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">pos_max</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">17</span><span class="p">),</span> <span class="n">cont</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">gauss</span><span class="o">.</span><span class="n">print_param</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="obj.moffat_image">
<tt class="descclassname">obj.</tt><tt class="descname">moffat_image</tt><big>(</big><span class="optional">[</span><em>shape=(101</em>, <em>101)</em>, <em>wcs=WCS()</em>, <em>center=None</em>, <em>I=1.</em>, <em>a=1.0</em>, <em>q=1.0</em>, <em>n=2</em>, <em>rot = 0.</em>, <em>factor=1</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.moffat_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new image from a 2D Moffat function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>integer or (integer,integer)</em>) &#8211; <p>Lengths of the image in Y and X with python notation: (ny,nx). (101,101) by default.</p>
<p>If wcs object contains dimensions, shape is ignored and wcs dimensions are used.</p>
</li>
<li><strong>wcs</strong> (<em>WCS</em>) &#8211; World coordinates.</li>
<li><strong>center</strong> (<em>(float,float)</em>) &#8211; Gaussian center (dec_peak, ra_peak). If None the center of the image is used.</li>
<li><strong>I</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Intensity at image center. 1 by default.</li>
<li><strong>a</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Half width at half maximum of the image in the absence of atmospheric scattering. 1 by default.</li>
<li><strong>q</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Axis ratio, 1 by default.</li>
<li><strong>n</strong> (<em>integer</em>) &#8211; Atmospheric scattering coefficient. 2 by default.</li>
<li><strong>rot</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Angle position in degree.</li>
<li><strong>factor</strong> (<em>integer</em>) &#8211; <p>If factor&lt;=1, moffat value is computed in the center of each pixel.</p>
<p>If factor&gt;1, for each pixel, moffat value is the sum of the moffat values on the factor*factor pixels divided by the pixel area.</p>
</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Image object (<a class="reference internal" href="#image-class">Image class</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.make_image">
<tt class="descclassname">obj.</tt><tt class="descname">make_image</tt><big>(</big><em>x</em>, <em>y</em>, <em>z</em>, <em>steps</em><span class="optional">[</span>, <em>deg=True</em>, <em>limits=None</em>, <em>spline=False</em>, <em>order=3</em>, <em>smooth=0</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.make_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates z(x,y) and returns an image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float array</em>) &#8211; Coordinate array corresponding to the declinaison.</li>
<li><strong>y</strong> (<em>float array</em>) &#8211; Coordinate array corresponding to the right ascension.</li>
<li><strong>z</strong> (<em>float array</em>) &#8211; Input data.</li>
<li><strong>steps</strong> (<em>(float,float)</em>) &#8211; Steps of the output image (dDec,dRa).</li>
<li><strong>deg</strong> (<em>boolean</em>) &#8211; <p>If True, world coordinates are in decimal degrees (CTYPE1=&#8217;RA&#8212;TAN&#8217;,CTYPE2=&#8217;DEC&#8211;TAN&#8217;,CUNIT1=CUNIT2=&#8217;deg&#8217;)</p>
<p>If False (by default), world coordinates are linear (CTYPE1=CTYPE2=&#8217;LINEAR&#8217;)</p>
</li>
<li><strong>limits</strong> (<em>(float,float,float,float)</em>) &#8211; <p>Limits of the image (dec_min,ra_min,dec_max,ra_max).</p>
<p>If None, minum and maximum values of x,y arrays are used.</p>
</li>
<li><strong>spline</strong> (<em>boolean</em>) &#8211; False: bilinear interpolation, True: spline interpolation</li>
<li><strong>order</strong> (<em>integer</em>) &#8211; Polynomial order for spline interpolation (default 3)</li>
<li><strong>smooth</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; Smoothing parameter for spline interpolation (default 0: no smoothing)</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">obj.Image object (<a class="reference internal" href="#image-class">Image class</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.composite_image">
<tt class="descclassname">obj.</tt><tt class="descname">composite_image</tt><big>(</big><em>ImaColList</em><span class="optional">[</span>, <em>mode='lin'</em>, <em>cuts=(10</em>, <em>90)</em>, <em>bar=False</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#obj.composite_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds composite image from a list of image and colors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ImaColList</strong> (<em>list of tuple (Image,float,float)</em>) &#8211; List of images and colors [(Image, hue, saturation)]</li>
<li><strong>mode</strong> (<em>&#8216;lin&#8217; or &#8216;sqrt&#8217;</em>) &#8211; Intensity mode. Use &#8216;lin&#8217; for linear and &#8216;sqrt&#8217; for root square.</li>
<li><strong>cuts</strong> (<em>(float,float)</em>) &#8211; Minimum and maximum in percent.</li>
<li><strong>bar</strong> (<em>boolean</em>) &#8211; If bar is True a color bar image is created.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Returns a PIL RGB image (or 2 PIL images if bar is True).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">mpdaf.obj</span> <span class="kn">import</span> <span class="n">composite_image</span>

<span class="n">stars</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&quot;stars.fits&quot;</span><span class="p">)</span>
<span class="n">lowz</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&quot;lowz.fits&quot;</span><span class="p">)</span>
<span class="n">highz</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&quot;highz.fits&quot;</span><span class="p">)</span>
<span class="n">imalist</span> <span class="o">=</span> <span class="p">[</span><span class="n">stars</span><span class="p">,</span> <span class="n">lowz</span><span class="p">,</span> <span class="n">highz</span><span class="p">]</span>
<span class="n">tab</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">imalist</span><span class="p">,</span><span class="n">linspace</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">composite_image</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span><span class="n">cuts</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">99.5</span><span class="p">),</span><span class="n">mode</span><span class="o">=</span><span class="s">&#39;sqrt&#39;</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">p1</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;test_composite.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="gauss2d-class">
<h2>Gauss2D class<a class="headerlink" href="#gauss2d-class" title="Permalink to this headline">¶</a></h2>
<p>This class stores 2D gaussian parameters.</p>
<div class="section" id="id1">
<h3>Attributes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="19%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr><td>center</td>
<td>(float,float)</td>
<td>Gaussian center (dec,ra).</td>
</tr>
<tr><td>flux</td>
<td>float</td>
<td>Gaussian integrated flux.</td>
</tr>
<tr><td>width</td>
<td>(float,float)</td>
<td>Spreads of the Gaussian blob (dec_width,ra_width).</td>
</tr>
<tr><td>cont</td>
<td>float</td>
<td>Continuum value.</td>
</tr>
<tr><td>rot</td>
<td>float</td>
<td>Rotation in degrees.</td>
</tr>
<tr><td>peak</td>
<td>float</td>
<td>Gaussian peak value.</td>
</tr>
<tr><td>err_center</td>
<td>(float,float)</td>
<td>Estimated error on Gaussian center.</td>
</tr>
<tr><td>err_flux</td>
<td>float</td>
<td>Estimated error on Gaussian integrated flux.</td>
</tr>
<tr><td>err_width</td>
<td>(float,float)</td>
<td>Estimated error on Gaussian width.</td>
</tr>
<tr><td>err_rot</td>
<td>float</td>
<td>Estimated error on rotation.</td>
</tr>
<tr><td>err_peak</td>
<td>float</td>
<td>Estimated error on Gaussian peak value.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Methods<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="obj.Gauss2D.copy">
<tt class="descclassname">obj.Gauss2D.</tt><tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Gauss2D.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies Gauss2D object in a new one and returns it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Gauss2D object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obj.Gauss2D.print_param">
<tt class="descclassname">obj.Gauss2D.</tt><tt class="descname">print_param</tt><big>(</big><big>)</big><a class="headerlink" href="#obj.Gauss2D.print_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints Gaussian parameters.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_mpdaf_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Image</a><ul>
<li><a class="reference internal" href="#image-class">Image class</a><ul>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#transformation">Transformation</a></li>
<li><a class="reference internal" href="#filter">Filter</a></li>
<li><a class="reference internal" href="#plotting">Plotting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions-to-create-a-new-image">Functions to create a new image</a></li>
<li><a class="reference internal" href="#gauss2d-class">Gauss2D class</a><ul>
<li><a class="reference internal" href="#id1">Attributes</a></li>
<li><a class="reference internal" href="#id2">Methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="spectrum.html"
                        title="previous chapter">Spectrum</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cube.html"
                        title="next chapter">Cube</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/image.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cube.html" title="Cube"
             >next</a> |</li>
        <li class="right" >
          <a href="spectrum.html" title="Spectrum"
             >previous</a> |</li>
        <li><a href="index.html">mpdaf.drs v1.0.1-dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, L. Piqueras.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>